# PR Reviewer Assignment Service (PRS)

Сервис для управления командами, пользователями и Pull Requests с автоматическим назначением ревьюверов.

---

## Структура проекта

- `cmd/app` — точка входа приложения.
- `internal/` — реализация хендлеров, репозиториев, моделей и сервисной логики.
- `migrations/` — SQL миграции для PostgreSQL.
- `docker-compose.yml` — для запуска приложения, БД и миграций.
- `dockerfile` — билд и запуск Go-приложения.
- `Makefile` — удобные команды для сборки и запуска.
- `.env` — конфигурация БД и порта приложения.

---

## Makefile

С помощью Makefile удобно запускать и управлять проектом через Docker Compose:

```bash
# Собрать бинарь приложения
make build

# Поднять сервис и БД (миграции выполняются автоматически)
make up

# Остановить все сервисы
make down

# Очистить базу и тома
make clean

# Просмотр логов
make logs

# Применить миграции вручную (если нужно)
make migrate

---

## Примечания

- Все идентификаторы должны быть в формате UUID. (
    Плюсы: уникальность, удобство для масштабируемых систем, типизация в базе.

    Минусы: неудобно вводить вручную при тестировании.

    Решение: оставить UUID; для тестов заранее генерировать UUID или использовать готовые примеры.
)
- На некоторых системах для работы с Docker требуется `sudo`.
- Миграции выполняются автоматически при старте контейнера.

## API

Полная спецификация API доступна в файле [`openapi.yml`](./api/openapi.yml).  
Пример эндпоинта `/stats`:

- GET /stats — возвращает статистику назначений ревьюверов:
  ```json
  {
    "stats": [
      {"username": "Alice", "assigned_count": 5},
      {"username": "Bob", "assigned_count": 3}
    ]
  }

  ## Lint
Для проверки кода используется `golangci-lint`.

run:
  timeout: 5m           # Максимальное время выполнения линтера

linters:
  enable:
    - govet           # Стандартные проверки Go, такие как неправильные printf, unreachable code
    - errcheck        # Проверка того, что ошибки возврата функций действительно обрабатываются
    - staticcheck     # Расширенные статические проверки на потенциальные баги и неоптимальный код
    - gosimple        # Проверка на упрощение кода, удаление лишних конструкций
    - gocyclo         # Проверка сложности функций (цикломатическая сложность)
